const onLoadGlobal=()=>{const gameScreen=document.querySelector(".game-screen"),btnIniciar=document.querySelector("#btn-ini"),startOptions=document.querySelector(".start-options"),countHits=document.querySelector(".panel span"),resultScreen=document.querySelector(".result"),clock=document.querySelector("#timer");let counter=0,gameOn=!1;window.innerHeight>window.innerWidth&&(startOptions.style.display="none",document.querySelector(".panel").style.display="none",document.querySelector(".orient").style.display="block"),window.addEventListener("orientationchange",()=>location.reload());const addZeroLeft=number=>number>=10?number:`0${number}`,printTimer=(min,sec)=>clock.innerHTML=`${addZeroLeft(min)}:${addZeroLeft(sec)}`,clearTimer=()=>printTimer(1,0),showResult=(counter,level)=>{let pointsSpan=document.querySelector("#points"),showLevel=document.querySelector("#end-level");pointsSpan.innerHTML=counter,showLevel.innerHTML=level,resultScreen.style.display="block"},resetGame=()=>{gameOn=!1,clearTimer(),location.reload()},startTimer=()=>{let min=1,sec=60;const changeTimer=()=>{min=0,sec--,printTimer(min,sec)};return new Promise((resolve,reject)=>{const timerInterval=setInterval(()=>{changeTimer(),0===min&&0===sec&&(clearInterval(timerInterval),resolve(!0))},1e3)})},createTarget=()=>{let target=document.createElement("div");target.className="target ini",gameScreen.appendChild(target);let maxLeft=target.parentElement.offsetWidth-100,maxTop=target.parentElement.offsetHeight-100,randomLeftPos=Math.floor(Math.random()*(maxLeft-5)+5),randomTopPos=Math.floor(Math.random()*(maxTop-5)+5),randomWidth=Math.floor(50*Math.random()+50);return target.style.left=randomLeftPos+"px",target.style.top=randomTopPos+"px",target.style.width=randomWidth+"px",target.style.height=randomWidth+"px",target},createCloroqText=()=>{let cloroqTxt=gameScreen.appendChild(document.createElement("h1"));return cloroqTxt.style.color="rgb(242, 255, 58)",cloroqTxt.style.fontSize="60px",cloroqTxt.innerHTML="CLOROQUINA!",cloroqTxt},createCloroq=(leftPos,topPos)=>{let cloroqTxt=createCloroqText(),target2=document.createElement("div");target2.className="target cloroq",gameScreen.appendChild(target2),target2.style.left=leftPos,target2.style.top=topPos,target2.style.width="15%",target2.style.height="15%",target2.className+=" animate",setTimeout(()=>{target2.remove()},750),setTimeout(()=>{cloroqTxt.remove()},1100)},endGame=async()=>await startTimer(),runGame=level=>{let targetClicked=!1,speed;gameOn=!0,"Pazuello"===level&&(speed=1300),"Normal"===level&&(speed=1e3),"Difícil"===level&&(speed=800);const gameInterval=setInterval(()=>{let target=createTarget();target.addEventListener("click",e=>{!1===targetClicked&&(e.target.className="target hit",counter+=1,targetClicked=!0,counter>1&&counter%10==0&&createCloroq(target.style.left,target.style.top),setTimeout(()=>{target.remove(),targetClicked=!1},.8*speed))}),setTimeout(()=>target.remove(),speed),countHits.innerHTML=counter},speed);endGame().then(resolve=>{resolve&&(clearInterval(gameInterval),setTimeout(()=>{showResult(counter,level)},1e3))})},newGame=()=>{const alert=document.querySelector(".alert");alert.style.display="block",document.querySelector("#yes").addEventListener("click",()=>resetGame()),document.querySelector("#no").addEventListener("click",()=>alert.style.display="none")},checkLevel=()=>{let level;const radios=document.querySelectorAll(".level");return radios.forEach(thisRadio=>{thisRadio.checked&&(level=thisRadio.value)}),level};btnIniciar.addEventListener("click",e=>{let level=checkLevel();resultScreen.style.display="none",counter=0,void 0!==level?(startOptions.style.display="none",gameOn?newGame():runGame(level)):(e.preventDefault(),document.querySelector("#choose-level").innerHTML="Escolha o nível!")}),clearTimer()};onLoadGlobal();